define(function(require,i,l){var r=require("underscore"),$=require("$"),s=require("events"),t=require("iscroll"),e=function(i,l){r.bindAll(this),s.mixTo(this),this.$list=$(i).find(".lists"),this.iscroll=new t(this.$list[0],{vScrollbar:!1,hScrollbar:!1,snap:"li",onScrollMove:this.handleScroll,onScrollEnd:this.handlePick}),this.render(l)};return e.prototype={constructor:e,handlePick:function(){return this.iscroll.currPageY>=this.iscroll.pagesY.length-2?void this.iscroll.scrollToPage(0,this.iscroll.pagesY.length-3,0):(this.$currEl&&this.$currEl.removeClass("current"),this.$currEl=this.$list.find("li").eq(this.iscroll.currPageY+1),this.$currEl.addClass("current"),this.value=this.$currEl.data("value"),void this.trigger("picked"))},handleScroll:function(){console.log(this.iscroll.pagesY,this.iscroll.currPageY)},render:function(i){i&&i.data&&(this.$list.find("li[data-value]").remove(),r.each(i.data,function(i){this.$list.find("li:last").before('<li data-value="'+i[1]+'">'+i[0]+"</li>")},this))},getIndex:function(){return this.iscroll.currPageY},gotoIndex:function(i){this.iscroll.refresh(),this.iscroll.scrollToPage(0,i,0)}},e});