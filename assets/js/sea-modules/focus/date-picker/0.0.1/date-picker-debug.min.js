define("focus/date-picker/0.0.1/scroll-picker-debug",["underscore-debug","$-debug","events-debug","iscroll-debug"],function(require,i,e){var t=require("underscore-debug"),$=require("$-debug"),s=require("events-debug"),a=require("iscroll-debug"),r=function(i,e){t.bindAll(this),s.mixTo(this),this.$list=$(i).find(".lists"),this.iscroll=new a(this.$list[0],{vScrollbar:!1,hScrollbar:!1,snap:"li",onScrollEnd:this.handlePick}),this.render(e)};return r.prototype={constructor:r,handlePick:function(){return this.iscroll.currPageY>=this.iscroll.pagesY.length-2?void this.iscroll.scrollToPage(0,this.iscroll.pagesY.length-3,0):(this.$currEl&&this.$currEl.removeClass("current"),this.$currEl=this.$list.find("li").eq(this.iscroll.currPageY+1),this.$currEl.addClass("current"),this.value=this.$currEl.data("value"),void this.trigger("picked"))},render:function(i){i&&i.data&&(this.$list.find("li[data-value]").remove(),t.each(i.data,function(i){this.$list.find("li:last").before('<li data-value="'+i[1]+'">'+i[0]+"</li>")},this))},getIndex:function(){return this.iscroll.currPageY},gotoIndex:function(i){this.iscroll.refresh(),this.iscroll.scrollToPage(0,i,0)}},r}),define("focus/date-picker/0.0.1/festival-debug",[],{1:{1:"元旦"},5:{1:"劳动节"}}),define("focus/date-picker/0.0.1/date-picker-debug",["./scroll-picker-debug","./festival-debug","underscore-debug","$-debug","events-debug","moment-debug","modal-debug","iscroll-debug"],function(require){function i(i,t){return e.map(e.range(i,t+1),function(i){var e=i>9?i:"0"+i;return[e,i]})}var e=require("underscore-debug"),$=require("$-debug"),t=require("events-debug"),s=require("moment-debug"),a=require("modal-debug"),r=require("./scroll-picker-debug"),l=require("./festival-debug"),d='<div class="md-input-date" style="display: none;"><div class="ly-clearFix title"><div class="ly-left date-title"></div><div class="ly-right date-descr"></div></div><div class="content"><div class="dates ly-clearFix"><div class="date"><a href="javascript:void(0);" class="tri tri-up"></a><a href="javascript:void(0);" class="tri tri-down"></a><div class="lists"><ul><li></li><li></li></ul><span class="hex hex1"></span><span class="hex hex2"></span></div></div><div class="date"><a href="javascript:void(0);" class="tri tri-up"></a><a href="javascript:void(0);" class="tri tri-down"></a><div class="lists"><ul><li></li><li></li></ul><span class="hex hex1"></span><span class="hex hex2"></span></div></div><div class="date"><a href="javascript:void(0);" class="tri tri-up"></a><a href="javascript:void(0);" class="tri tri-down"></a><div class="lists"><ul><li></li><li></li></ul><span class="hex hex1"></span><span class="hex hex2"></span></div></div></div></div><div class="action"><a href="javascript:void(0)" title="" class="cancel">取消</a><a href="javascript:void(0)" title="" class="submit">确定</a></div></div>',n=1950,c=2050,h=function(){e.bindAll(this),t.mixTo(this),this.festival=l,this.$el=$(d).appendTo("body"),this.modal=new a(this.$el),this.init()};return h.prototype={constructor:h,init:function(){this.yearPicker=new r(this.$el.find(".date")[0],{data:i(n,c)}),this.monthPicker=new r(this.$el.find(".date")[1],{data:i(1,12)}),this.dayPicker=new r(this.$el.find(".date")[2]),this.yearPicker.on("picked",this.handleYearMonthPick),this.monthPicker.on("picked",this.handleYearMonthPick),this.dayPicker.on("picked",this.handleDayPick),this.$el.find(".cancel").tap(this.hide),this.$el.find(".submit").tap(this.submit)},show:function(i){this.modal.show(),i=i||{};var t=i.date||s();e.isString(t)&&(t=s(t)),this.yearPicker.gotoIndex(t.year()-n),this.monthPicker.gotoIndex(t.month()-0),this.dayPicker.gotoIndex(t.date()-1)},hide:function(){this.modal.hide()},submit:function(){this.hide(),this.trigger("submit",this.date)},handleYearMonthPick:function(){if(this.yearPicker.value&&this.monthPicker.value){var e=s([this.yearPicker.value,this.monthPicker.value-1]).daysInMonth(),t=this.dayPicker.getIndex();this.dayPicker.render({data:i(1,e)}),this.dayPicker.gotoIndex(t||0)}},handleDayPick:function(){this.date=s([this.yearPicker.value,this.monthPicker.value-1,this.dayPicker.value]),this.$el.find(".date-title").text(this.date.format("YYYY-MM-DD ddd")),this.renderFestival()},renderFestival:function(){if(s().startOf("day").isSame(this.date))this.$el.find(".date-descr").text("今天");else{var i=this.festival[this.monthPicker.value];i&&i[this.dayPicker.value]?this.$el.find(".date-descr").text(i[this.dayPicker.value]):this.$el.find(".date-descr").text("")}}},h.create=function(i){h.instance||(h.instance=new h,h.instance.on("submit",function(i){h.relatedInput.value=i.format("YYYY-MM-DD"),$(h.relatedInput).attr("formnovalidate",!1).trigger("focusout")})),$(i).focus(function(){return $(this).attr("formnovalidate",!0),this.blur(),h.instance.show({date:this.value}),h.relatedInput=this,!1})},s.lang("zh",{weekdaysShort:"周日 周一 周二 周三 周四 周五 周六".split(" ")}),h});