define(function(require,e,t){var $=require("$"),n={normalizeRule:function(e){if("string"==typeof e){var t={};$.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},checkable:function(e){return/radio|checkbox/i.test(e.type)},depend:function(e,t){switch(typeof e){case"boolean":return e;case"string":return $(e,t.form).length>0;case"function":return e(t);default:return!0}},elementValue:function(e){var t=$(e).attr("type"),n=$(e).val();return"radio"===t||"checkbox"===t?n=$('input[name="'+$(e).attr("name")+'"]:checked').val():"string"==typeof n&&(n=n.replace(/\r/g,"")),n},findByName:function(e){return $('[name="'+e.name+'"]',e.form)},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return $("option:selected",t).length;case"input":return this.checkable(t)?this.findByName(t).filter(":checked").length:e.length}},formatMessage:function(e,t){return t.constructor!==Array&&(t=[t]),$.each(t,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),n)}),e}};return n});