define(function(require,t,e){function i(t,e){this.$element=s(t),this.options=s.extend({},i.DEFAULTS,s(t).data(),e),this.init()}function n(t){var e=Array.prototype.slice.call(arguments,1),n=this;return this.each(function(){var r=s(this),a=r.data("hc.UISlide"),o="object"==typeof t&&t;a||r.data("hc.UISlide",a=new i(r,o)),"string"==typeof t&&(n=a[t].apply(a,e))}),n}var s=require("$");i.DEFAULTS={autoRun:!1,interval:2e3,speed:250,effect:"move",trigger:"mousedown",template:'<a class="arrow prev" href="javascript:;"></a><a class="arrow next" href="javascript:;"></a><div class="number"></div>'},i.prototype.init=function(){this.autoRun=this.$element.attr("data-UISlide-autoRun")||this.options.autoRun,this.interval=this.$element.attr("data-UISlide-interval")||this.options.interval,this.speed=this.$element.attr("data-UISlide-speed")||this.options.speed,this.effect=this.$element.attr("data-UISlide-effect")||this.options.effect,this.trigger=this.$element.attr("data-UISlide-trigger")||this.options.trigger,this.template=this.options.template,this.width=this.$element.find("ul li").width(),this.height=this.$element.find("ul li").height(),this.number=this.$element.find("ul li").size(),this.creatDom(),this.event()},i.prototype.creatDom=function(){this.setCurrentObj(0),this.$element.append(this.template).attr({onselectstart:"return false",unselecttable:"on"})},i.prototype.event=function(){if(this.arrowEvent(),this.navigationEvent(),this.autoRun){var t=this;t.autoPlay(t.getCurrentIndex()),t.$element.hover(function(){clearInterval(t.startPlay)},function(){t.autoPlay(t.getCurrentIndex())})}},i.prototype.getCurrentIndex=function(){return this.$element.find("ul li:visible").index()},i.prototype.setCurrentObj=function(t){switch(this.effect){case"none":this.$element.find("ul li:eq("+t+")").show().siblings("li").hide();break;case"fade":this.$element.find("ul li:eq("+t+")").fadeIn(this.speed).siblings("li").fadeOut(this.speed);break;case"move":var e=this.getCurrentIndex();if(e>t)var i=-this.width;else var i=this.width;this.$element.find("ul li:eq("+t+")").css("left",i).show().animate({left:0},this.speed),this.$element.find("ul li:eq("+e+")").animate({left:-i},this.speed,function(){s(this).hide().css("left",0)})}},i.prototype.setCurrentNavigation=function(t){this.$element.find(".number span:eq("+t+")").addClass("current").siblings("span").removeClass("current")},i.prototype.arrowEvent=function(){var t=this;this.$element.on(this.trigger,".arrow.prev",function(){var e=t.getCurrentIndex();0==e&&(e=t.number),t.switchover(e-1)}),this.$element.on(this.trigger,".arrow.next",function(){var e=t.getCurrentIndex();e==t.number-1&&(e=-1),t.switchover(e+1)})},i.prototype.navigationEvent=function(){for(var t=this,e=1;e<=this.number;e++)this.$element.find(".number").append('<span title="第'+e+'张"></span>');this.setCurrentNavigation(0),this.$element.on(this.trigger,".number span",function(){t.switchover(s(this).index())})},i.prototype.autoPlay=function(t){var e=this;e.startPlay=setInterval(function(){t<e.number-1?t++:t=0,e.switchover(t)},e.interval)},i.prototype.switchover=function(t){0==this.$element.find("ul li:animated").size()&&(this.setCurrentObj(t),this.setCurrentNavigation(t))},s(function(){s("[data-toggle=UISlide]").UISlide()});var r=s.fn.UISlide;s.fn.UISlide=n,s.fn.UISlide.Constructor=i,s.fn.UISlide.noConflict=function(){return s.fn.UISlide=r,this},e.exports=i});